<Project Sdk="Microsoft.NET.Sdk">
    <PropertyGroup>
        <OutputType>WinExe</OutputType>
        <ApplicationIcon>icon.ico</ApplicationIcon>
        <ApplicationManifest>app.manifest</ApplicationManifest>
    </PropertyGroup>

    <PropertyGroup Condition=" '$(Configuration)' == 'Release' ">
        <DefineConstants />
    </PropertyGroup>


    <ItemGroup>
        <None Update="uninstall-helper.ps1">
            <CopyToOutputDirectory>Always</CopyToOutputDirectory>
            <DependentUpon>app.pupnet.conf</DependentUpon>
        </None>
        <None Update="com.nexusmods.app.desktop">
            <DependentUpon>app.pupnet.conf</DependentUpon>
        </None>
        <None Update="app.manifest">
            <DependentUpon>app.pupnet.conf</DependentUpon>
        </None>
        <None Update="com.nexusmods.app.metainfo.xml">
            <DependentUpon>app.pupnet.conf</DependentUpon>
        </None>
        <None Update="sign.bat">
            <DependentUpon>app.pupnet.conf</DependentUpon>
        </None>
        <None Update="uninstall.bat">
            <DependentUpon>app.pupnet.conf</DependentUpon>
        </None>
        <None Update="icon.svg">
            <DependentUpon>app.pupnet.conf</DependentUpon>
        </None>
    </ItemGroup>


    <ItemGroup>
      <ProjectReference Include="..\NexusMods.App.Common\NexusMods.App.Common.csproj" />
    </ItemGroup>

    <Target Name="CopyCustomContentOnPublish" AfterTargets="Publish"
            Condition="'$(RuntimeIdentifier)' == 'win-x64' Or '$(RuntimeIdentifier)' == 'win-x86' Or '$(RuntimeIdentifier)' == 'win'">
        <Copy SourceFiles="uninstall.bat" DestinationFolder="$(PublishDir)" />
    </Target>
</Project>
