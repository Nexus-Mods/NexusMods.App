<Styles xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:converters1="clr-namespace:NexusMods.Themes.NexusFluentDark.Converters">


    <!-- Style Definitions -->


    <Style Selector="TreeDataGrid.TreeWhiteCaret">
        <Style Selector="^ TreeDataGridExpanderCell > Border > DockPanel > Border > ToggleButton">
            <Setter Property="Width" Value="16" />
            <Setter Property="Height" Value="16" />
            <Setter Property="Foreground" Value="{StaticResource NeutralSubduedBrush}" />

            <Style Selector="^:pointerover">
                <Setter Property="Foreground" Value="{StaticResource NeutralStrongBrush}" />
            </Style>
        </Style>
    </Style>


    <!-- Default Header Style for TreeDataGrid, for when the header exists -->
    <Style Selector="TreeDataGrid">
        <!-- Column Style -->
        <Style Selector="^ /template/ Border#ColumnHeadersPresenterBorder">
            <Setter Property="BorderBrush" Value="{StaticResource StrokeTranslucentWeak}" />
            <Setter Property="BorderThickness" Value="0,1,0,1" />
            <Setter Property="Height" Value="38" />
        </Style>

        <Style Selector="^ /template/ ContentPresenter#PART_ContentPresenter TextBlock">
            <Setter Property="Foreground"
                    Value="{StaticResource NeutralSubdued}" />
        </Style>
    </Style>


    <!-- Column Header/Text Style -->
    <Style Selector="TreeDataGridColumnHeader">
        <!-- Text Inside Column Header -->
        <!-- Note: Keeping Highlight as White for now. -->

        <Style Selector="^ TextBlock">
            <Setter Property="TextBlock.Foreground"
                    Value="{StaticResource NeutralSubdued}" />
            <Setter Property="TextBlock.Theme" Value="{StaticResource TitleSMSemiTheme}" />
        </Style>
    </Style>


    <!-- Modlist and Library TreeDataGrid Styles -->
    <Style Selector="TreeDataGrid.MainListsStyling">

        <Setter Property="BorderThickness" Value="0" />

        <Style Selector="^ /template/ Border#ColumnHeadersPresenterBorder">
            <Setter Property="BorderThickness" Value="0 0 0 1" />
            <Setter Property="Height" Value="52" />
            <Setter Property="BorderBrush" Value="{StaticResource StrokeTranslucentWeakBrush}" />
            <Setter Property="CornerRadius" Value="0" />
        </Style>

        <!-- Column Header Style -->
        <Style Selector="^ TreeDataGridColumnHeader">
            <Setter Property="Foreground" Value="{StaticResource NeutralSubduedBrush}" />
            <Setter Property="BorderThickness" Value="0,0,0,0" />

            <Style Selector="^ TextBlock">
                <Setter Property="Theme" Value="{StaticResource TitleXSSemiTheme}" />
            </Style>
        </Style>

        <!-- First column header padding -->
        <Style Selector="^ TreeDataGridColumnHeader:nth-child(1)">
            <Setter Property="Padding" Value="24,0,0,0" />
        </Style>

        <!-- Last column header padding -->
        <Style Selector="^ TreeDataGridColumnHeader:nth-last-child(1)">
            <Setter Property="Padding" Value="0,0,24,0" />
        </Style>

        <!-- Row Style -->
        <Style Selector="^ TreeDataGridRow">
            <Setter Property="Height" Value="52" />
            <Setter Property="Background" Value="{StaticResource SurfaceLowBrush}" />

            <!-- Expander column styling -->
            <Style Selector="^ TreeDataGridExpanderCell">

                <!-- Update the padding converter on the Border inside the TreeDataGridExpanderCell template -->
                <!-- Rest is copied from the default style: -->
                <!-- https://github.com/AvaloniaUI/Avalonia.Controls.TreeDataGrid/blob/38dce086b6c06503ab29bf824063f6fd113ea309/src/Avalonia.Controls.TreeDataGrid/Themes/Generic.axaml#L226-L245 -->
                <Setter Property="Template">
                    <ControlTemplate>
                        <Border x:Name="CellBorder"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="{TemplateBinding CornerRadius}"
                                Padding="{TemplateBinding Indent, Converter={x:Static converters1:TreeDataGridIndentToPaddingConverter.Instance}}">
                            <!-- This is to adjust the left padding based on the indent level of the row. -->

                            <DockPanel>
                                <Border DockPanel.Dock="Left"
                                        Margin="4 0"
                                        Width="12" Height="12">
                                    <ToggleButton Theme="{StaticResource TreeDataGridExpandCollapseChevron}"
                                                  Focusable="False"
                                                  IsChecked="{TemplateBinding IsExpanded, Mode=TwoWay}"
                                                  IsVisible="{TemplateBinding ShowExpander}" />
                                </Border>
                                <Decorator Name="PART_Content" />
                            </DockPanel>
                        </Border>
                    </ControlTemplate>
                </Setter>

                <!-- Expander Toggle button size and color  -->
                <Style Selector="^ > Border > DockPanel > Border > ToggleButton">
                    <Setter Property="Width" Value="20" />
                    <Setter Property="Height" Value="20" />
                    <Setter Property="Foreground" Value="{StaticResource NeutralSubduedBrush}" />

                    <Style Selector="^:pointerover">
                        <Setter Property="Foreground" Value="{StaticResource NeutralStrongBrush}" />
                    </Style>

                    <Style Selector="^ /template/ Border">
                        <Setter Property="Width" Value="12" />
                        <Setter Property="Height" Value="12" />
                        <Setter Property="Margin" Value="0" />
                    </Style>
                </Style>
            </Style>

            <!-- Subdued for text in all columns -->
            <Style Selector="^ TreeDataGridTextCell /template/ Border#CellBorder > TextBlock">
                <Setter Property="Foreground" Value="{StaticResource NeutralSubduedBrush}" />
                <Setter Property="Theme" Value="{StaticResource BodyMDNormalTheme}" />
            </Style>

            <!-- Except for expander column -->
            <Style Selector="^ TreeDataGridExpanderCell">
                <Style Selector="^ TreeDataGridTextCell /template/ Border#CellBorder > TextBlock">
                    <Setter Property="Foreground" Value="{StaticResource NeutralModerateBrush}" />
                </Style>
            </Style>

            <!-- First column cell padding -->
            <Style Selector="^ :is(TreeDataGridCell):nth-last-child(1)">
                <Setter Property="Padding" Value="4,2,24,2" />
            </Style>
            
            <!-- Row hover styling -->
            <Style Selector="^:pointerover /template/ TreeDataGridCellsPresenter#PART_CellsPresenter">
                <Setter Property="Background" Value="{StaticResource SurfaceMidBrush}" />
            </Style>

            <!-- Row selection styling -->
            <Style Selector="^:selected /template/ TreeDataGridCellsPresenter#PART_CellsPresenter">
                <Setter Property="Background" Value="{StaticResource SurfaceHighBrush}" />
            </Style>

            
        </Style>

    </Style>

</Styles>
