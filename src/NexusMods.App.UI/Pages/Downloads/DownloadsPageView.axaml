<reactive:ReactiveUserControl
    x:TypeArguments="local:IDownloadsPageViewModel"
    xmlns="https://github.com/avaloniaui"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:reactive="http://reactiveui.net"
    xmlns:local="clr-namespace:NexusMods.App.UI.Pages.Downloads"
    xmlns:resources="clr-namespace:NexusMods.App.UI.Resources"
    xmlns:icons="clr-namespace:NexusMods.UI.Sdk.Icons;assembly=NexusMods.UI.Sdk"
    xmlns:controls="clr-namespace:NexusMods.App.UI.Controls"
    xmlns:pageHeader="clr-namespace:NexusMods.App.UI.Controls.PageHeader"
    xmlns:search="clr-namespace:NexusMods.App.UI.Controls.Search"
    mc:Ignorable="d" d:DesignWidth="1000" d:DesignHeight="450"
    x:Class="NexusMods.App.UI.Pages.Downloads.DownloadsPageView"
    Background="{StaticResource SurfaceTransparentBrush}">
    <!-- Background set to ensure that clicks anywhere on the page are correctly registered and bring focus to it -->

    <Design.DataContext>
        <local:DownloadsPageDesignViewModel />
    </Design.DataContext>

    <Grid RowDefinitions="Auto, *">

        <pageHeader:PageHeader Grid.Row="0"
                               Title="{Binding HeaderTitle}"
                               Description="{Binding HeaderDescription}"
                               Icon="{x:Static icons:IconValues.PictogramDownload}"
                               Margin="24 24 24 0" />

        <!-- Content area with toolbar and main content -->
        <Grid Grid.Row="1" RowDefinitions="Auto, *" Margin="0,16,0,0">

            <!-- Toolbar with command 'all' buttons -->

            <controls:Toolbar Margin="24, 0">
                <ItemsControl>
                    <search:SearchControl x:Name="SearchControl"
                                          PageName="Downloads"
                                          ButtonSize="Toolbar" />
                </ItemsControl>

                <ItemsControl>
                    <controls:StandardButton x:Name="PauseAllButton"
                                             Text="Pause all"
                                             Type="Tertiary"
                                             Size="Toolbar"
                                             Fill="None"
                                             ShowIcon="Left"
                                             LeftIcon="{x:Static icons:IconValues.Pause}"
                                             Command="{Binding PauseAllCommand}" />

                    <controls:StandardButton x:Name="ResumeAllButton"
                                             Text="Resume all"
                                             Type="Tertiary"
                                             Size="Toolbar"
                                             Fill="None"
                                             ShowIcon="Left"
                                             LeftIcon="{x:Static icons:IconValues.PlayArrow}"
                                             Command="{Binding ResumeAllCommand}" />
                </ItemsControl>

                <ItemsControl>
                    <controls:StandardButton x:Name="PauseSelectedButton"
                                             Text=""
                                             Type="Tertiary"
                                             Size="Toolbar"
                                             Fill="None"
                                             ShowIcon="Left"
                                             LeftIcon="{x:Static icons:IconValues.Pause}"
                                             Command="{Binding PauseSelectedCommand}"
                                             IsVisible="{Binding HasRunningItems^}" />

                    <controls:StandardButton x:Name="ResumeSelectedButton"
                                             Text=""
                                             Type="Tertiary"
                                             Size="Toolbar"
                                             Fill="None"
                                             ShowIcon="Left"
                                             LeftIcon="{x:Static icons:IconValues.PlayArrow}"
                                             Command="{Binding ResumeSelectedCommand}"
                                             IsVisible="{Binding HasPausedItems^}" />

                    <controls:StandardButton x:Name="CancelSelectedButton"
                                             Text=""
                                             Type="Tertiary"
                                             Size="Toolbar"
                                             Fill="None"
                                             ShowIcon="Left"
                                             LeftIcon="{x:Static icons:IconValues.Close}"
                                             Command="{Binding CancelSelectedCommand}" />
                </ItemsControl>
            </controls:Toolbar>

            <!-- Main content with TreeDataGrid -->
            <controls:EmptyState Grid.Row="1"
                                 IsActive="{Binding IsEmptyStateActive}"
                                 Header="{x:Static resources:Language.InProgress_NoDownloadsTextBlock}">
                <controls:EmptyState.Subtitle>
                    <StackPanel Orientation="Vertical" Spacing="16">
                        <TextBlock Text="No downloads are currently active." />
                    </StackPanel>
                </controls:EmptyState.Subtitle>

                <TreeDataGrid x:Name="TreeDataGridDownloads"
                              ShowColumnHeaders="True"
                              CanUserResizeColumns="True"
                              CanUserSortColumns="True"
                              Classes="MainListsStyling"
                              Margin="0 8 0 0" />
            </controls:EmptyState>

        </Grid>

    </Grid>
</reactive:ReactiveUserControl>
